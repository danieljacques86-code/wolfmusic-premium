<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<title>WolfMusic Premium</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{background:#0b0b0b;color:#fff;font-family:Arial;text-align:center}
.card{max-width:360px;margin:30px auto;background:#151515;padding:20px;border-radius:15px;box-shadow:0 0 15px #000}
img{width:100%;border-radius:12px}
input,button{width:100%;padding:10px;margin-top:8px;border-radius:8px;border:none}
button{background:#f1c40f;font-weight:bold}
.admin{display:none}
.badge{background:#f1c40f;color:#000;padding:5px 10px;border-radius:20px;font-size:12px;display:inline-block;margin-bottom:10px}
.btn-del{background:#e74c3c;color:#fff;font-weight:bold;margin-top:5px;}
</style>
<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>
<body>

<div class="card">
  <span class="badge">WolfMusic Premium</span>
  <img id="capa" src="https://i.imgur.com/8Km9tLL.png">
  <h2 id="nome">WolfMusic R치dio</h2>
  <audio id="player" controls style="width:100%"></audio>
  <button onclick="tocarAleatorio()">Modo Aleat칩rio 郊윒잺</button>
</div>

<div class="card admin" id="admin">
  <h3>Modo Administrador</h3>
  <input id="novoNome" placeholder="Nome da m칰sica ou r치dio">
  <input id="novaCapa" placeholder="URL da capa">
  <input id="novoLink" placeholder="Link MP3 ou R치dio">
  <button onclick="salvar()">Salvar Conte칰do</button>
  <button class="btn-del" onclick="excluir()">Excluir 칔ltima Postagem</button>
</div>

<div class="card" id="login">
  <h3>Acesso Premium</h3>
  <input id="user" placeholder="Usu치rio">
  <input id="pass" type="password" placeholder="Senha">
  <button onclick="logar()">Entrar</button>
</div>

<script>
const nome = document.getElementById('nome');
const capa = document.getElementById('capa');
const player = document.getElementById('player');
const admin = document.getElementById('admin');
const login = document.getElementById('login');
const novoNome = document.getElementById('novoNome');
const novaCapa = document.getElementById('novaCapa');
const novoLink = document.getElementById('novoLink');
let playlist = [];
let atualIndex = 0;

// 游댳 CONFIGURA칂츾O FIREBASE
const firebaseConfig = {
  apiKey: "SEU_APIKEY",
  authDomain: "SEU_AUTHDOMAIN",
  projectId: "SEU_PROJECTID",
  storageBucket: "SEU_STORAGEBUCKET",
  messagingSenderId: "SEU_MESSAGING_SENDER_ID",
  appId: "SEU_APPID"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();
const collectionRef = db.collection('playlist');

// 游댳 CARREGAR PLAYLIST DO FIRESTORE
collectionRef.orderBy('timestamp').get().then(snapshot => {
  playlist = [];
  snapshot.forEach(doc => {
    playlist.push({...doc.data(), id: doc.id});
  });
  if(playlist.length>0){
    const ultimo = playlist[playlist.length-1];
    nome.innerText = ultimo.nome;
    capa.src = ultimo.capa;
    player.src = ultimo.link;
  }
});

// LOGIN ADMIN
function logar(){
  if(user.value==='admin@blogger.com' && pass.value==='26122025'){
    admin.style.display='block';
    login.style.display='none';
  } else alert('Acesso negado');
}

// SALVAR POSTAGEM (FIRESTORE)
function salvar(){
  const postagem = {
    nome: novoNome.value,
    capa: novaCapa.value,
    link: novoLink.value,
    timestamp: Date.now()
  };
  collectionRef.add(postagem).then(()=> {
    alert('Postagem salva!');
    location.reload();
  });
}

// EXCLUIR 칔LTIMA POSTAGEM
function excluir(){
  if(playlist.length===0){ alert('Nenhuma postagem para excluir'); return; }
  if(confirm('Deseja realmente excluir a 칰ltima postagem?')){
    const ultimoId = playlist[playlist.length-1].id;
    collectionRef.doc(ultimoId).delete().then(()=>{
      alert('Postagem exclu칤da!');
      location.reload();
    });
  }
}

// MODO ALEAT칍RIO
function tocarAleatorio(){
  if(playlist.length===0){ alert('Nenhuma postagem cadastrada!'); return; }
  const shuffled = playlist.slice().sort(()=>Math.random()-0.5);
  atualIndex=0;
  function tocarProximo(){
    const atual = shuffled[atualIndex];
    nome.innerText = atual.nome;
    capa.src = atual.capa;
    player.src = atual.link;
    player.play();
    atualIndex++;
    if(atualIndex>=shuffled.length){ atualIndex=0; }
  }
  player.onended = tocarProximo;
  tocarProximo();
}
</script>

</body>
</html>
